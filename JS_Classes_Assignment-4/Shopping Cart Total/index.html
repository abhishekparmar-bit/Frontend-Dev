<!DOCTYPE html>
<html>
<head>
    <title>Shopping Cart</title>
    <style>
        input {
            display: block;
            margin-bottom: 10px;
            padding: 5px;
            width: 200px;
        }
        #cartDetails {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid black;
            width: 300px;
        }
    </style>
</head>
<body>
    <h2>Shopping Cart</h2>
    
    <form id="cartForm">
        Item Name:
        <input type="text" id="itemName">
        Price:
        <input type="number" id="itemPrice">
        Quantity:
        <input type="number" id="itemQty">
        <button type="button" id="addItemBtn">Add Item</button>
    </form>

    Coupon Code:
    <input type="text" id="coupon">
    <button type="button" id="applyCouponBtn">Apply Coupon</button>

    <div id="cartDetails"></div>

    <script>
        class Cart {
            constructor() {
                this.items = [];
                this.discount = 0;
            }

            addItem(name, price, qty) {
                this.items.push({name, price, qty});
            }

            getTotal() {
                let total = this.items.reduce((sum, item) => sum + item.price * item.qty, 0);
                if(this.discount > 0){
                    total = total - (total * (this.discount / 100));
                }
                return total;
            }

            applyCoupon(code) {
                if(/^SAVE\d+$/.test(code)){
                    this.discount = Number(code.match(/\d+/)[0]);
                } else if(/^DISC\d+$/.test(code)){
                    this.discount = Number(code.match(/\d+/)[0]);
                } else {
                    this.discount = 0;
                    alert("Invalid coupon code");
                }
            }

            displayCart() {
                let html = '<h3>Cart Items:</h3>';
                this.items.forEach(item => {
                    html += `${item.name} - ₹${item.price} x ${item.qty} <br>`;
                });
                html += `<strong>Total: ₹${this.getTotal()}</strong>`;
                document.getElementById('cartDetails').innerHTML = html;
            }
        }

        const cart = new Cart();

        document.getElementById('addItemBtn').addEventListener('click', function(){
            const name = document.getElementById('itemName').value;
            const price = Number(document.getElementById('itemPrice').value);
            const qty = Number(document.getElementById('itemQty').value);
            if(name && price > 0 && qty > 0){
                cart.addItem(name, price, qty);
                cart.displayCart();
            } else {
                alert("Enter valid item details");
            }
        });

        document.getElementById('applyCouponBtn').addEventListener('click', function(){
            const code = document.getElementById('coupon').value.toUpperCase();
            cart.applyCoupon(code);
            cart.displayCart();
        });
    </script>
</body>
</html>
