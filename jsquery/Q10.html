<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Q10 - Registration Form Validation</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body{font-family:Arial;padding:20px;}
    input{padding:8px;margin:6px 0;display:block;width:300px;}
    .invalid{border:2px solid red;}
    .success{color:green;}
  </style>
</head>
<body>
  <h2>Q10 â€” Registration Form Validation</h2>

  <form id="regForm" novalidate>
    <input id="name" placeholder="Name">
    <input id="email" placeholder="Email" type="email">
    <input id="password" placeholder="Password" type="password">
    <button type="submit">Register</button>
  </form>

  <p id="formMsg"></p>

<script>
$(function(){
  // Mock existing emails for uniqueness check
  const existing = ["test@example.com","hello@world.com"];

  function isValidEmail(email){
    const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
    return re.test(email);
  }

  $("#regForm").on("submit", function(e){
    e.preventDefault();
    $("input").removeClass("invalid");
    $("#formMsg").text("").removeClass("success");

    const name = $("#name").val().trim();
    const email = $("#email").val().trim().toLowerCase();
    const pass = $("#password").val();

    let valid = true;

    // 1. Name not empty
    if (!name) {
      $("#name").addClass("invalid");
      valid = false;
    }

    // 2. Email format and uniqueness
    if (!isValidEmail(email)) {
      $("#email").addClass("invalid");
      valid = false;
    } else if (existing.indexOf(email) !== -1) {
      $("#email").addClass("invalid");
      $("#formMsg").text("Email already in use.").css("color","red");
      valid = false;
    }

    // 3. Password min 8 chars
    if (!pass || pass.length < 8) {
      $("#password").addClass("invalid");
      valid = false;
    }

    if (valid) {
      $("#formMsg").text("Registration successful!").addClass("success").css("color","green");
    } else {
      if ($("#formMsg").text() === "") {
        $("#formMsg").text("Please correct the highlighted fields.").css("color","red");
      }
    }
  });
});
</script>
</body>
</html>
